<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Python for Humanities: Starting With Data</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav incubator"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><abbr class="badge badge-light" title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback." style="background-color: #FFC700; border-radius: 5px">
          <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#field-testing-alpha-stage" class="external-link alert-link" style="color: #383838">
            <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="border-radius: 5px"></i>
            Alpha
          </a>
          <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
        </abbr>
        
      </div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/starting-with-data.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Python for Humanities
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Python for Humanities
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html"></a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Python for Humanities
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 6%" class="percentage">
    6%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 6%" aria-valuenow="6" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/starting-with-data.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="short-introduction-to-Python.html">1. Short Introduction to Programming in Python</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        2. Starting With Data
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#working-with-pandas-dataframes-in-python">Working With Pandas DataFrames in Python</a></li>
<li><a href="#reading-csv-data-using-pandas">Reading CSV Data Using Pandas</a></li>
<li><a href="#quick-easy-plotting-data-using-pandas">Quick &amp; Easy Plotting Data Using Pandas</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="index-slice-subset.html">3. Indexing, Slicing and Subsetting DataFrames in Python</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="data-types-and-format.html">4. Data Types and Formats</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="merging-data.html">5. Combining DataFrames with pandas</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="loops-and-functions.html">6. Data workflows and automation</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="visualization-ggplot-python.html">7. Plotting</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="working-with-sql.html">8. Accessing SQLite Databases Using Python &amp; Pandas</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="putting-it-all-together.html">9. Putting It All Together</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html"></a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="short-introduction-to-Python.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="index-slice-subset.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="short-introduction-to-Python.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Short Introduction
        </a>
        <a class="chapter-link float-end" href="index-slice-subset.html" rel="next">
          Next: Indexing, Slicing... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Starting With Data</h1>
        <p>Last updated on 2024-05-21 |
        
        <a href="https://github.com/carpentries-incubator/python-humanities-lesson/edit/main/episodes/starting-with-data.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can I import data in Python?</li>
<li>What is Pandas?</li>
<li>Why should I use Pandas to work with data?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Navigate the workshop directory and download a dataset.</li>
<li>Explain what a library is and what libraries are used for.</li>
<li>Describe what the Python Data Analysis Library (Pandas) is.</li>
<li>Load the Python Data Analysis Library (Pandas).</li>
<li>Use <code>read_csv</code> to read tabular data into Python.</li>
<li>Describe what a DataFrame is in Python.</li>
<li>Access and summarize data stored in a DataFrame.</li>
<li>Define indexing as it relates to data structures.</li>
<li>Perform basic mathematical operations and summary statistics on data
in a Pandas DataFrame.</li>
<li>Create simple plots.</li>
</ul></div>
</div>
</div>
</div>
</div>
<section id="working-with-pandas-dataframes-in-python"><h2 class="section-heading">Working With Pandas DataFrames in Python<a class="anchor" aria-label="anchor" href="#working-with-pandas-dataframes-in-python"></a>
</h2>
<hr class="half-width"><p>We can automate the processes listed above using Python. It is
efficient to spend time building code to perform these tasks because
once it is built, we can use our code over and over on different
datasets that share a similar format. This makes our methods easily
reproducible. We can also share our code with colleagues so they can
replicate our analysis.</p>
<div class="section level4">
<h4 id="starting-in-the-same-spot">Starting in the same spot<a class="anchor" aria-label="anchor" href="#starting-in-the-same-spot"></a></h4>
<p>If you do not already have JupyterLab opened from the workshop
directroy, let’s do that now. Doing so should help us avoid path and
file name issues. At this time please navigate to the workshop directory
in your terminal.</p>
<p><em>Opening JupyterLab</em></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># navigate to or start your terminal from the worskhop directory</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> jupyter lab</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># you may see various status messages as it spins up jupyter server </span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># and launches your default browser</span></span></code></pre>
</div>
<p>A quick aside that there are Python libraries like <a href="https://docs.python.org/3/library/os.html" class="external-link">OS Library</a> that can
work with our directory structure, however, that is not our focus
today.</p>
</div>
<div class="section level4">
<h4 id="alex-our-user-story">Alex: our user story<a class="anchor" aria-label="anchor" href="#alex-our-user-story"></a></h4>
<p>Alex is a researcher interested in exploring the collection of
fictional works at their university and assessing how representative it
is in relation to the student body. Alex was able to find a pre-liminary
dataset assembled by a previous researcher from which they want to
create some exploratory plots and intermediate datasets in order to
determine next steps to expand on this line of inquiry.</p>
<p>Alex could do some of this work using spreadsheet systems but this
can be time consuming to do and lead to mistakes that are hard to
detect.</p>
<p>This workshop will show how Python can be used to automate some of
the processes allowing them to be re-run in the future.</p>
</div>
<div class="section level4">
<h4 id="our-data">Our Data<a class="anchor" aria-label="anchor" href="#our-data"></a></h4>
<p>We will be using files from the data folder. This section will use
the <code>all_works.csv</code> file that can be found in your data
folder.</p>
<p>The dataset is stored as a comma separated (<code>.csv</code>) file,
where each row holds information for a single title, and the columns
represent diferent aspects (variables) of each entry:</p>
<table class="table"><colgroup><col width="20%"><col width="79%"></colgroup><thead><tr class="header"><th>Column</th>
<th>Description</th>
</tr></thead><tbody><tr class="odd"><td>title</td>
<td>Title of Work</td>
</tr><tr class="even"><td>subjects</td>
<td>List of Subjects</td>
</tr><tr class="odd"><td>mms_id</td>
<td>Metadata Management System ID</td>
</tr><tr class="even"><td>author</td>
<td>Author(s) delimited with ‘;’</td>
</tr><tr class="odd"><td>publication_date</td>
<td>Year of Publication</td>
</tr><tr class="even"><td>publication_place</td>
<td>Place of Publication</td>
</tr><tr class="odd"><td>language_code</td>
<td>Language of Text</td>
</tr><tr class="even"><td>resource_type</td>
<td>Type of resource, e.g. physical, electronic</td>
</tr><tr class="odd"><td>acquisition_date</td>
<td>Date of Acquisition</td>
</tr><tr class="even"><td>is_dei</td>
<td>Boolean for whether work meets broadest definition of a DEI
work</td>
</tr><tr class="odd"><td>checkouts</td>
<td>Count of number of times</td>
</tr></tbody></table><div id="semantics-of-dei" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="semantics-of-dei" class="callout-inner">
<h3 class="callout-title">Semantics of DEI<a class="anchor" aria-label="anchor" href="#semantics-of-dei"></a>
</h3>
<div class="callout-content">
<ul><li>Diversity, Equity and Inclusion are not concrete terms that can be
divorced from history and geography. Thus, it is incumbent on academic
researchers to define what that means in their practice.<br></li>
<li>Arguably, any resource is potentially useful in the pursuit of DEI
research if for no other reason as to provide contrast and foreground
for other works, so designating something a DEI resource will always be
a judgment call.<br></li>
<li>Here, though, the <em>is_dei</em> flag is applied to any works with
subjects deemed outside those with a male, western European lineage.
That determination is also a judgment call on multiple levels that you
may disagree with, and that is okay. Not only might you disagree with
what subjects do or do not share a male, western European lineage, but
we are also at the mercy of the cataloger wrestling with their own
biases while applying a limited scope of slowly evolving options.</li>
<li>Our flag will never be perfect, so our goal should be good enough
with the time and information we have. You can spot check the subjects
deemed <a href="files/dei.csv">dei</a> and <a href="files/non_dei.csv">non-dei</a>.</li>
<li>All datasets should be approached with a sceptical eye. When we are
done here, you should not only know how to leverage datasets, but
interogate and adjust them to adhere to different assumptions. Just be
sure to make those adjustments and assumptions clear to those who follow
after you.</li>
</ul></div>
</div>
</div>
<p>If we open the <code>all_works.csv</code> data file using a text
editor, the first few rows of our first file look like this:</p>
<pre><code>title,subjects,mms_id,author,publication_date,publication_place,language_code,resource_type,acquisition_date,is_dei,subject_count,chekcouts
"""A god of justice?"" : the problem of evil in twentieth-century Black literature","['American literature--African American authors--History and criticism', 'African Americans--Intellectual life--20th century', 'African Americans--Intellectual lif', 'American literature--African American author']",991004617919702908,"Whitted, Qiana J., 1974-",2009.0,Charlottesville,eng,Book - Physical,2016-06-26 23:51:01,True,4,
"""Baad bitches"" and sassy supermamas : Black power action films","['Blaxploitation films--United States--History and criticism', 'African American women heroes in motion pictures', 'African American women heroes in motion picture', 'Blaxploitation film', 'Blaxploitation Film']",991003607949702908,"Dunn, Stephane, 1967-",2008.0,Urbana,eng,Book - Physical,2011-12-13 03:51:20,True,5,1.0
"""Codependent lesbian space alien seeks same""","['Lesbians--Drama', 'Lesbians', 'Video recordings for the hearing impaired']",991013190057102908,"Olnek, Madeleine.; Space Aliens, LLC.",2011.0,"[New York, NY?]",eng,Projected medium - Physical,2016-11-10 07:56:09,True,3,1.0
"""Lactilla tends her fav'rite cow"" : ecocritical readings of animals and women in eighteenth-century British labouring-class women's poetry","['English poetry--Women authors--History and criticism', 'Working class writings, English--History and criticism', 'Ecofeminism in literature', 'English poetry--Women authors', 'Working class women in literature', 'Working class writings, English']",991003662979702908,"Milne, Anne.",2008.0,Lewisburg,eng,Book - Physical,2015-10-07 16:31:28,True,8,</code></pre>
</div>
<div class="section level3">
<h3 id="why-software-libraries">Why software libraries<a class="anchor" aria-label="anchor" href="#why-software-libraries"></a></h3>
<p>Theoretically, you could use only built in python functions to
interact directly with the text file, but you would be re-inventing the
wheel. Better to do a little research and find someone who has already
grappled with similar problems and stand on their shoulders instead.
Programming often has a mechanism to facilitate this. In python, the are
called libraries.</p>
<p>A library in Python contains a set of tools (functions) that perform
different actions. Importing a library is like getting a set of
particular tools out of a storage locker and setting them up on the
bench for use in a project. Once a library is set up, its functions can
be used or called to perform different tasks.</p>
</div>
<div class="section level3">
<h3 id="why-pandas-in-python">Why Pandas in Python<a class="anchor" aria-label="anchor" href="#why-pandas-in-python"></a></h3>
<p>One of the best options for working with tabular data in Python is to
use the <a href="https://pandas.pydata.org/" class="external-link">Python Data Analysis
Library</a> (a.k.a. Pandas Library). The Pandas library provides
structures to sort our data, can produce high quality plots in
conjunction with other libraries such as <a href="https://matplotlib.org/" class="external-link">matplotlib</a>, and integrates nicely
with libraries that use <a href="https://www.numpy.org/" class="external-link">NumPy</a>
(which is another common Python library) arrays.</p>
</div>
<div class="section level3">
<h3 id="loading-a-library">Loading a library<a class="anchor" aria-label="anchor" href="#loading-a-library"></a></h3>
<p>Python doesn’t load all of the libraries available to it by default.
We have to add an <code>import</code> statement to our code in order to
use library functions required for our project. To import a library, we
use the syntax <code>import libraryName</code>, where
<code>libraryName</code> represents the name of the specific library we
want to use. Note that the <code>import</code> command calls a library
that has been installed previously in our system. If we use the
<code>import</code> command to call for a library that does not exist in
our local system, the command will throw and error when executed. In
this case, you can use <code>pip</code> command in another terminal
window to install the missing libraries. <a href="https://github.com/resbaz/Intro_Python_Nov2017/blob/master/Python_Installation.md" class="external-link">See
here for details</a> on how to do this.</p>
<p>Moreover, if we want to give the library a nickname to shorten the
command, we can add <code>as nickNameHere</code>. An example of
importing the pandas library using the common nickname <code>pd</code>
is:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre>
</div>
<p>Each time we call a function that’s in a library, we use the syntax
<code>LibraryName.FunctionName</code>. Adding the library name with a
<code>.</code> before the function name tells Python where to find the
function. In the example above, we have imported Pandas as
<code>pd</code>. This means we don’t have to type out
<code>pandas</code> each time we call a Pandas function.</p>
</div>
</section><section id="reading-csv-data-using-pandas"><h2 class="section-heading">Reading CSV Data Using Pandas<a class="anchor" aria-label="anchor" href="#reading-csv-data-using-pandas"></a>
</h2>
<hr class="half-width"><p>We will begin by locating and reading in a data which in CSV format.
We can use Pandas’ <code>read_csv</code> function to pull either a local
(a file in our machine) or a remote (one that is available for
downloading from the web) file into a Pandas table or <a href="https://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe" class="external-link">DataFrame</a>.</p>
<p>In order to read data in, we need to know where the data is stored on
our computer or its URL address if the file is available on the web.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># note that pd.read_csv is used because we imported pandas as pd</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co"># note that this assumes that the data file is in the same location</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co"># as the Jupyter notebook to simplify pathing</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>pd.read_csv(<span class="st">"all_works.csv"</span>)</span></code></pre>
</div>
<div class="section level3">
<h3 id="so-whats-a-dataframe">So What’s a DataFrame?<a class="anchor" aria-label="anchor" href="#so-whats-a-dataframe"></a></h3>
<p>A DataFrame is a 2-dimensional data structure that can store data of
different types (including characters, integers, floating point values,
factors and more) in columns. It is similar to a spreadsheet or a
<code>data.frame</code> in R. A DataFrame always has an index (0-based
integers by default). An index refers to the position of an element in
the data structure.</p>
<p>The above command yields the <strong>output</strong> similar to
below, but formatted differently</p>
<pre><code>                                                   title                                           subjects  ...  is_dei checkouts
0      "A god of justice?" : the problem of evil in t...  ['American literature--African American author...  ...    True         0
1      "Baad bitches" and sassy supermamas : Black po...  ['Blaxploitation films--United States--History...  ...    True         1
2           "Codependent lesbian space alien seeks same"  ['Lesbians--Drama', 'Lesbians', 'Video recordi...  ...    True         1
3      "Lactilla tends her fav'rite cow" : ecocritica...  ['English poetry--Women authors--History and c...  ...    True         0
4      "The useless mouths", and other literary writings  ['French drama--20th century--Translations int...  ...    True         1
...                                                  ...                                                ...  ...     ...       ...
14227  ¡Ban c/s this! : the BSP anthology of Xican@ l...  ["Littérature américaine--Auteurs américain...  ...   False         0
14228  ¡Muy pop! : conversations on Latino popular cu...  ['Popular culture--United States', "Littératu...  ...   False         1
14229  ¡Viva la historieta! : Mexican comics, NAFTA, ...  ['Mondialisation dans la littérature', "Mondi...  ...   False         0
14230                 Đời về cơ bản là buồn cười  ['Life--Comic books, strips, etc', 'Life', 'Co...  ...   False         3
14231  Đường vào văn chương : phê bình lý trí ...  ['Literature, Modern--History and criticism--T...  ...   False         0

[14232 rows x 11 columns]</code></pre>
<p>We can see that there were 14232 rows parsed. Each row has 11
columns. The first column displayed is the <strong>index</strong> of the
DataFrame. The index is used to identify the position of the data, but
it is not an actual column of the DataFrame. It looks like the
<code>read_csv</code> function in Pandas read our file properly.
However, we haven’t saved any data to memory so we can not work with it
yet. We need to assign the DataFrame to a variable so we can call and
use the data. Remember that a variable is a name given to a value, such
as <code>x</code>, or <code>data</code>. We can create a new object with
a variable name by assigning a value to it using <code>=</code>.</p>
<p>Let’s call the imported data <code>works_df</code>:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>works_df <span class="op">=</span> pd.read_csv(<span class="st">"all_works.csv"</span>)</span></code></pre>
</div>
<p>Notice that when you assign the imported DataFrame to a variable,
Python does not produce any output on the screen. We can print the value
of the <code>works_df</code> object by typing its name into the cell and
running it. If you were doing this in a script file, you would need to
use <code>print(works_df)</code>. Not needing to do so here is another
convenience feature of Jupyter.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>works_df</span></code></pre>
</div>
<p>which prints contents like above</p>
</div>
<div class="section level3">
<h3 id="exploring-our-data">Exploring our Data<a class="anchor" aria-label="anchor" href="#exploring-our-data"></a></h3>
<p>We can use attributes and methods provided by the DataFrame object to
summarize and access the data stored in it.</p>
<p>Attributes are called by using the syntax
<code>df_object.attribute</code>. For example, we can use the
<em>dtypes</em> attribute of the DataFrame to return a Series object of
the dataypes for each column in the DataFrame.</p>
<pre><code><span><span class="va">works_df.dtypes</span></span></code></pre>
<p>which returns output similar to:</p>
<pre><code>title                object
subjects             object
mms_id                int64
author               object
publication_date      int64
publication_place    object
language_code        object
resource_type        object
acquisition_date     object
is_dei                 bool
checkouts             int64
dtype: object</code></pre>
<p><code>int64</code> represents numeric integer values -
<code>int64</code> cells cannot store decimals. <code>object</code>
represents strings (letters and numbers). <code>float64</code>
represents numbers with decimals.</p>
<p>Methods are called by using the syntax
<code>df_object.method()</code>. Note the inclusion of open brackets at
the end of the method. Python treats methods as
<strong>functions</strong> associated with a dataframe rather than just
a property of the object as with attributes. Similarly to functions,
methods can include optional parameters inside the brackets to change
their default behaviour.</p>
<p>As an example, <code>works_df.head()</code> gets the first few rows
in the DataFrame <code>works_df</code> using <strong>the
<code>head()</code> method</strong>. With a method, we can supply extra
information within the open brackets to control its behaviour,
e.g. <code>works_df.head(25)</code>.</p>
<p>Let’s try out a few of the common DataFrame methods and
attributes.</p>
<div id="challenge---dataframes" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge---dataframes" class="callout-inner">
<h3 class="callout-title">Challenge - DataFrames<a class="anchor" aria-label="anchor" href="#challenge---dataframes"></a>
</h3>
<div class="callout-content">
<p>Using our DataFrame <code>works_df</code>, try out the attributes
&amp; methods below to see what they return.</p>
<ol style="list-style-type: decimal"><li><p><code>works_df.columns</code></p></li>
<li><p><code>works_df.shape</code> Take note of the output of
<code>shape</code> - what format does it return the shape of the
DataFrame in?</p></li>
</ol><p>HINT: <a href="https://docs.python.org/3/tutorial/datastructures.html#tuples-and-sequences" class="external-link">More
on tuples, here</a>.</p>
<ol start="3" style="list-style-type: decimal"><li><p><code>works_df.head()</code> Also, what does
<code>works_df.head(15)</code> do?</p></li>
<li><p><code>works_df.tail()</code></p></li>
<li><p><code>works_df.info()</code></p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li><p><code>works_df.columns</code> return list of column as a data
type <em>pandas.core.indexes.base.Index</em></p></li>
<li><p><code>works_df.shape</code>. Take note of the output of the shape
method. What format does it return the shape of the DataFrame
in?</p></li>
</ol><p><code>type(works_df.shape)</code> -&gt; <code>Tuple</code>, (rows,
columns), i.e. standard row-first Python format</p>
<ol start="3" style="list-style-type: decimal"><li>
<code>works_df.head()</code>. Also, what does
<code>works_df.head(15)</code> do?</li>
</ol><p>Show first <code>N</code> lines</p>
<ol start="4" style="list-style-type: decimal"><li><code>works_df.tail()</code></li>
</ol><p>Show last <code>N</code> lines</p>
<ol start="5" style="list-style-type: decimal"><li>
<code>works_df.info()</code> returns a table with wealth of
information about number of colums, datatypes, missing values, memory
usage.</li>
</ol></div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="summary-statistics-groups-in-pandas">Summary Statistics &amp; Groups in Pandas<a class="anchor" aria-label="anchor" href="#summary-statistics-groups-in-pandas"></a></h3>
<p>We often want to calculate summary statistics for our data. This can
be useful even at the exploratory phase as it can help you understand
the ranges of your data and detect possible outliers.</p>
<p>We can calculate basic statistics for all records in a single column
using the syntax below:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>works_df[<span class="st">'checkouts'</span>].describe()</span></code></pre>
</div>
<p>gives <strong>output</strong></p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>count    <span class="fl">14232.000000</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>mean         <span class="fl">0.526349</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>std          <span class="fl">1.432189</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="bu">min</span>          <span class="fl">0.000000</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="dv">25</span><span class="op">%</span>          <span class="fl">0.000000</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="dv">50</span><span class="op">%</span>          <span class="fl">0.000000</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="dv">75</span><span class="op">%</span>          <span class="fl">1.000000</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="bu">max</span>         <span class="fl">43.000000</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>Name: checkouts, dtype: float64</span></code></pre>
</div>
<p>We can also extract specific metrics for one or various columns if we
wish:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>works_df[<span class="st">'checkouts'</span>].<span class="bu">min</span>()</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>works_df[<span class="st">'checkouts'</span>].<span class="bu">max</span>()</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>works_df[<span class="st">'checkouts'</span>].mean()</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>works_df[<span class="st">'checkouts'</span>].std()</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>works_df[<span class="st">'checkouts'</span>].count()</span></code></pre>
</div>
<p>But if we want to summarize by one or more variables, for example
checkouts by language_code, we can use the <strong><code>.groupby</code>
method</strong>. When executed, this method creates a DataFrameGroupBy
object containing a subset of the original DataFrame. Once we’ve created
it, we can quickly calculate summary statistics by a group of our
choice. For example the following code will group our data by
language_code.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Group data by status</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>grouped_data <span class="op">=</span> works_df.groupby(<span class="st">'language_code'</span>)</span></code></pre>
</div>
<p>If we execute the <strong>pandas function
<code>describe</code></strong> on this new object we will obtain
descriptive stats for all the numerical columns in <code>works_df</code>
grouped by the different cities available in the
<code>publication_place</code> column of the DataFrame.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># summary statistics for all numeric columns by place</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>grouped_data.describe()</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co"># provide the mean for each numeric column by place</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>grouped_data.mean()</span></code></pre>
</div>
<p><code>grouped_data.mean(numeric_only=True)</code>
<strong>OUTPUT:</strong></p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>	mms_id	publication_date	is_dei	checkouts</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>language_code				</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>ara	<span class="fl">9.910032e+17</span>	<span class="fl">2009.000000</span>	<span class="fl">0.400000</span>	<span class="fl">0.000000</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>bos	<span class="fl">9.910132e+17</span>	<span class="fl">2018.000000</span>	<span class="fl">0.500000</span>	<span class="fl">0.000000</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>cat	<span class="fl">9.910131e+17</span>	<span class="fl">2011.000000</span>	<span class="fl">0.500000</span>	<span class="fl">0.000000</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>chi	<span class="fl">9.910073e+17</span>	<span class="fl">2011.400000</span>	<span class="fl">0.500000</span>	<span class="fl">0.700000</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co"># Truncated for brevity</span></span></code></pre>
</div>
<p>The <code>groupby</code> command is powerful in that it allows us to
quickly generate summary stats, but how do you know what columns will
make good group by candidates.</p>
<p>Let’s use the publication locations as an example by finding out how
many unique values are in that column. DataFrames and Series object
often share methods allowing for two different approaches. One method
calls <code>pd.unique</code> function directly off the dataframe and
passes in the column of intrest. In the other, we can a method directly
off the column <code>works_df['publication_place'].unique()</code>. The
output is identical listing the unique values in the
<code>publication_place</code> column.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>pd.unique(works_df[<span class="st">'publication_place'</span>])</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>works_df[<span class="st">'publication_place'</span>].unique()</span></code></pre>
</div>
<p>either <strong>returns</strong>:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>array([<span class="st">'Charlottesville'</span>, <span class="st">'Urbana'</span>, <span class="st">'[New York, NY?]'</span>, ...,</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>       <span class="st">'Cambridge [UK] ; Medford'</span>, <span class="st">'Arles'</span>, <span class="st">'[London]:'</span>], dtype<span class="op">=</span><span class="bu">object</span>)</span></code></pre>
</div>
<div id="challenge---statistics" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge---statistics" class="callout-inner">
<h3 class="callout-title">Challenge - Statistics<a class="anchor" aria-label="anchor" href="#challenge---statistics"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>Create a list of unique publicaton years found in the data. Call
it <code>years</code>. How many unique years are there in the
data?</p></li>
<li><p>What is the difference between <code>len(years)</code> and
<code>works_df['publication_date'].nunique()</code>?</p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li>Create a list of unique locations found in the index data. Call it
<code>places</code>. How many unique location are there in the
data?</li>
</ol><div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>years <span class="op">=</span> pd.unique(works_df[<span class="st">"publication_date"</span>])</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="bu">len</span>(years)</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>What is the difference between <code>len(years)</code> and
<code>works_df["publication_date"].nunique()</code>?</li>
</ol><p>Both do result in the same output, making it alternative ways of
getting the unique values. <code>nunique</code> combines the count and
unique value extraction.</p>
</div>
</div>
</div>
</div>
<div id="challenge---summary-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge---summary-data" class="callout-inner">
<h3 class="callout-title">Challenge - Summary Data<a class="anchor" aria-label="anchor" href="#challenge---summary-data"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li>Create your own groupy object based on publicatin_place and take the
mean of checkouts.</li>
<li>What is the mean number of checkout for works published in
<code>[Washington, D.C.]</code>.</li>
<li>What does the summary stats uncover about the quality of data in the
publication_place column?</li>
<li>What happens when you group by two columns using the following
syntax and then grab mean values:</li>
</ol><div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>grouped_data2 <span class="op">=</span> all_works_df.groupby([<span class="st">'resource_type'</span>, <span class="st">'language_code'</span>])</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>mean_values_by_type_and_language <span class="op">=</span> grouped_data2.mean(numeric_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>mean_values_by_type_and_language</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li>
</li></ol><div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>grouped_data <span class="op">=</span> all_works_df.groupby(<span class="st">'publication_place'</span>)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>means_by_publication_place <span class="op">=</span> grouped_data.mean(numeric_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>means_by_publication_place[<span class="st">'checkouts'</span>]</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>We can see in the list that is <em>0.000000</em>.</li>
<li>We can see that the entries vary in how they are formatted. For a
real analysis, you would likley want to clean this up before proceeding.
We can browse the full list using code like the following to
confirm:</li>
</ol><div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="cf">for</span> place <span class="kw">in</span> <span class="bu">sorted</span>(all_works_df[<span class="st">'publication_place'</span>].unique()):</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>    <span class="bu">print</span>(place)</span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal"><li>This code will create a GroupBy object grouped by both resource_type
and language_code and then calculate the mean of all numerical columns
within each group. This is useful for seeing trends across different
types of resources and languages, potentially revealing interactions
between these categories.</li>
</ol></div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="quickly-creating-summary-counts-in-pandas">Quickly Creating Summary Counts in Pandas<a class="anchor" aria-label="anchor" href="#quickly-creating-summary-counts-in-pandas"></a></h3>
<p>Let’s next count the number of publications for each author(s). We
can do this in a few ways, but we’ll use <code>groupby</code> combined
with <strong>a <code>count()</code> method</strong>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># count the number of texts by authors / groups of authors</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>author_counts <span class="op">=</span> works_df.groupby(<span class="st">'author'</span>)[<span class="st">'mms_id'</span>].count()</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>author_counts</span></code></pre>
</div>
<p>Or, we can also count just the rows that have the a specifig author
like “Abate, Michelle Ann, 1975-”:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>author_counts <span class="op">=</span> works_df.groupby(<span class="st">'author'</span>)[<span class="st">'mms_id'</span>].count()[<span class="st">'Abate, Michelle Ann, 1975-'</span>]</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>author_counts</span></code></pre>
</div>
<p>How does the code work?
<code>works_df.groupby('author')['mms_id'].count()</code> actually
returns a series where <em>author</em> is the index. We then filter by
that specific index.</p>
<div id="just-because-you-can-doesnt-mean-you-should" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="just-because-you-can-doesnt-mean-you-should" class="callout-inner">
<h3 class="callout-title">Just because you can doesn’t mean you
should<a class="anchor" aria-label="anchor" href="#just-because-you-can-doesnt-mean-you-should"></a>
</h3>
<div class="callout-content">
<p>Many of our works have groups of authors, and they are all contained
in a single cell. This makes some questions easier to ask and some
harder. It is actually non-trivial to get a count of all of “Abate,
Michelle Ann, 1975-” works since she may be listed among other author
groups. Thus grouping by author and filtering on this key given the
current data configuration may not be telling us what we thought it was.
Thus it is important to know your data well and format it and reformat
it to meet your analysis needs. You need to stay vigilant and check your
understanding. Python won’t stop you from doing a poor analysis very
efficiently.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="math-operations">Math Operations<a class="anchor" aria-label="anchor" href="#math-operations"></a></h3>
<p>If we wanted to, we could perform math on an entire numerical column
of our data. To demonstrate this, let’s add another column that shows
the percentage of total checkouts for each work.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>all_checkouts <span class="op">=</span> works_df.checkouts.<span class="bu">sum</span>()</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="co"># because "checkout_percentage" is not in our columns index, pandas add is as a new column.</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>works_df[<span class="st">"checkout_percentage"</span>] <span class="op">=</span> (works_df.checkouts <span class="op">/</span> all_checkouts) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>works_df.checkout_percentage</span></code></pre>
</div>
</div>
</section><section id="quick-easy-plotting-data-using-pandas"><h2 class="section-heading">Quick &amp; Easy Plotting Data Using Pandas<a class="anchor" aria-label="anchor" href="#quick-easy-plotting-data-using-pandas"></a>
</h2>
<hr class="half-width"><p>We will looks at plotting more in depth later, but we can rapidly
plot our summary stats using Pandas.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># group data</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>is_dei_count <span class="op">=</span> works_df.groupby(<span class="st">"is_dei"</span>)[<span class="st">"mms_id"</span>].count() </span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="co"># set equal to variable so we can set additional parameters</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>plot <span class="op">=</span> is_dei_count.plot(kind<span class="op">=</span><span class="st">"bar"</span>, title<span class="op">=</span><span class="st">"Checkout by DEI Status"</span>)</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="co">#lablel the y-axis</span></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>plot.set_ylabel(<span class="st">"Checkouts"</span>)</span></code></pre>
</div>
<p>What does this graph show? Let’s step through</p>
<ul><li><p><code>works_df.groupby("is_dei")</code> : This groups the works
by the boolean flag.</p></li>
<li><p><code>works_df.groupby("is_dei")["mms_id"]</code> : This chooses
a single column to count, rather than counting all columns since we only
want one number to plot. You could effectively pick any column.</p></li>
<li><p><code>works_df.groupby("is_dei")["mms_id"].count()</code> : this
counts the instances, i.e. how many works per given boolean
value?</p></li>
<li><p><code>plot = is_dei_count.plot(kind="bar",logy=True)</code> :
this plots a bar chart with the boolean flag on x axis and count on the
y axis.</p></li>
<li><p><code>plot.set_ylabel("Checkouts")</code> : this labels the
y-axis</p></li>
</ul><div id="challenge4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge4"></a>
</h3>
<div class="callout-content">
<p>Summary Plotting Challenge</p>
<p>Create a stacked bar plot, showing the checkouts, per language_code,
with the is_dei stacked on top of each other for the 10 languages with
the most checkouts. Drop any records where is_dei True column is NAN.
The language_code should go on the X axis, and the checkouts on the Y
axis. Some tips are below to help you solve this challenge:</p>
<ul><li><a href="http://pandas.pydata.org/pandas-docs/stable/visualization.html#basic-plotting-plot" class="external-link">For
more on Pandas plots, visit this link.</a></li>
<li>You can use the code that follows to create a stacked bar plot but
the data to stack need to be in individual columns. Here’s a simple
example with some data where ‘a’, ‘b’, and ‘c’ are the groups, and ‘one’
and ‘two’ are the subgroups.</li>
</ul><pre><code>d = {'one' : pd.Series([1., 2., 3.], index=['a', 'b', 'c']),'two' : pd.Series([1., 2., 3., 4.], index=['a', 'b', 'c', 'd'])}
pd.DataFrame(d)</code></pre>
<p>shows the following data</p>
<pre><code>      one  two
  a    1    1
  b    2    2
  c    3    3
  d  NaN    4</code></pre>
<p>We can plot the above with</p>
<pre><code><span><span class="co"># plot stacked data so columns 'one' and 'two' are stacked</span></span>
<span><span class="va">my_df</span> <span class="op">=</span> <span class="fu">pd.DataFrame</span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="fu">my_df.plot</span><span class="op">(</span>kind<span class="op">=</span><span class="st">'bar'</span>, stacked<span class="op">=</span><span class="va">True</span>, title<span class="op">=</span><span class="st">"The title of my graph"</span><span class="op">)</span></span></code></pre>
<figure><img src="fig/stackedBar1.png" alt="Stacked Bar Plot" class="figure mx-auto d-block"><div class="figcaption">Stacked Bar Plot</div>
</figure><ul><li>You can use the <code>.unstack()</code> method to transform grouped
data into columns for each plotting. Try running <code>.unstack()</code>
on some DataFrames above and see what it yields.</li>
</ul><p>Start by transforming the grouped data into an unstacked layout, then
create a stacked plot.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Show me the solution</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>First we group data by language_code and then by is_dei.</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>grouping <span class="op">=</span> works_df.groupby([<span class="st">'language_code'</span>,<span class="st">'is_dei'</span>])</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>checkouts <span class="op">=</span> grouping[<span class="st">'checkouts'</span>].<span class="bu">sum</span>()</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>top_checkouts <span class="op">=</span> checkouts.sort_values(ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">10</span>)</span></code></pre>
</div>
<p>The last two lines above calculates the sum of checkouts, for each
language_code further broken down be DEI boolean flag, as a table and
keeps only the top 10 most checked out items.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>language_code  is_dei
is_dei	False	True
language_code		
eng	4441.0	2530.0
spa	95.0	92.0
fre	70.0	62.0
per	27.0	26.0
ita	21.0	NaN
jpn	NaN	20.0</code></pre>
</div>
<p>After that, we use the <code>.unstack()</code> function on our
grouped data to figure out the total contribution of DEI verse non-DEI
for each language_code, and then plot the data.</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>plot <span class="op">=</span> top_checkouts.unstack.plot(kind<span class="op">=</span><span class="st">"bar"</span>, stacked<span class="op">=</span><span class="va">True</span>, title<span class="op">=</span><span class="st">"DEI Checkouts By Language"</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">5</span>),logy<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>plot.set_ylabel(<span class="st">"Checkouts"</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="short-introduction-to-Python.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="index-slice-subset.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="short-introduction-to-Python.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Short Introduction
        </a>
        <a class="chapter-link float-end" href="index-slice-subset.html" rel="next">
          Next: Indexing, Slicing... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/carpentries-incubator/python-humanities-lesson/edit/main/episodes/starting-with-data.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/carpentries-incubator/python-humanities-lesson/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/python-humanities-lesson/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/python-humanities-lesson/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.4" class="external-link">sandpaper (0.16.4)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.5" class="external-link">pegboard (0.7.5)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.2" class="external-link">varnish (1.0.2)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://carpentries-incubator.github.io/python-humanities-lesson/starting-with-data.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Starting With Data",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/python-humanities-lesson/starting-with-data.html",
  "identifier": "https://carpentries-incubator.github.io/python-humanities-lesson/starting-with-data.html",
  "dateCreated": "2024-06-04",
  "dateModified": "2024-05-21",
  "datePublished": "2024-06-04"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

